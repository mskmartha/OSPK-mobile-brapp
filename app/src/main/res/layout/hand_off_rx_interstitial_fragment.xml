<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <data>

        <import type="android.view.View" />
        <import type="com.albertsons.acupick.R"/>
        <variable
            name="isHandOffActionCancel"
            type="Boolean" />

        <variable
            name="viewModel"
            type="com.albertsons.acupick.ui.arrivals.complete.HandOffRxInterstitialViewModel" />
    </data>

    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/white">

        <androidx.core.widget.NestedScrollView
            visibilityGoneIfTrue="@{viewModel.showCompleteWithException}"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:visibility="gone"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent">

            <androidx.constraintlayout.widget.ConstraintLayout

                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@color/white"
                android:paddingHorizontal="20dp"
                android:paddingVertical="30dp"
                android:visibility="visible">

                <ImageView
                    android:id="@+id/handOffImage"
                    android:layout_width="150dp"
                    android:layout_height="150dp"
                    android:src="@{isHandOffActionCancel ? @drawable/ic_handoff_cancel : @drawable/handoff_complete}"
                    android:visibility="visible"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    tools:src="@drawable/handoff_complete" />

                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/lblHandOff1"
                    style="@style/PopinsBold30.DarkBrown"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="20dp"
                    android:gravity="center"
                    android:text="@string/lbl_hand_off_lbl_1"
                    app:layout_constraintTop_toBottomOf="@id/handOffImage"
                    tools:text="@string/lbl_hand_off_lbl_1" />

                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/lblHandOff2"
                    style="@style/PopinsBold16"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginHorizontal="24dp"
                    android:layout_marginStart="40dp"
                    android:layout_marginEnd="40dp"
                    android:gravity="center"
                    android:text="@string/lbl_hand_off_lbl_2"
                    android:textColor="@color/darkBrown"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/lblHandOff1"
                    tools:text="@string/lbl_hand_off_lbl_2" />



                <androidx.constraintlayout.widget.Guideline
                    android:id="@+id/gl1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    app:layout_constraintGuide_percent=".33" />

                <include
                    android:id="@+id/lFirst"
                    layout="@layout/layout_rewards_info"
                    android:layout_width="0dp"
                    app:title="@{@string/handoff_complete}"
                    android:layout_height="wrap_content"
                    app:layout_constraintEnd_toStartOf="@+id/gl1"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/lblHandOff2" />


                <include
                    android:id="@+id/lSecond"
                    layout="@layout/layout_rewards_info"
                    android:layout_width="0dp"
                    app:title="@{@string/collect_all_items}"
                    android:layout_height="wrap_content"
                    app:layout_constraintEnd_toStartOf="@+id/gl2"
                    app:layout_constraintStart_toStartOf="@+id/gl1"
                    app:layout_constraintTop_toBottomOf="@+id/lblHandOff2" />

                <include
                    android:id="@+id/lThird"
                    layout="@layout/layout_rewards_info"
                    android:layout_width="0dp"
                    app:title="@{@string/collect_auth_code}"
                    android:layout_height="wrap_content"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/gl2"
                    app:layout_constraintTop_toBottomOf="@+id/lblHandOff2" />

                <androidx.constraintlayout.widget.Guideline
                    android:id="@+id/gl2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    app:layout_constraintGuide_percent=".66" />

                <androidx.constraintlayout.widget.Guideline
                    android:id="@+id/gl3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    app:layout_constraintGuide_percent=".5" />

                <com.google.android.material.card.MaterialCardView
                    android:id="@+id/mcRank"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="20dp"
                    android:layout_marginTop="25dp"
                    app:cardCornerRadius="10dp"
                    app:cardElevation="0dp"
                    android:layout_marginEnd="5dp"
                    app:layout_constraintEnd_toStartOf="@+id/gl3"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/lThird">

                    <androidx.constraintlayout.widget.ConstraintLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:background="@color/score_card"
                        android:padding="10dp">

                        <androidx.appcompat.widget.AppCompatImageView
                            android:id="@+id/ivRank"
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:src="@drawable/ic_achievements"
                            app:layout_constraintStart_toStartOf="parent"
                            app:layout_constraintTop_toTopOf="parent" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/tvlblTimeBreakdown"
                            style="@style/TabNunitoSansSemiBoldGrey"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="center"
                            android:includeFontPadding="false"
                            android:text="@string/rank"
                            android:textColor="@color/darkBrown"
                            android:textSize="16sp"
                            app:layout_constraintHorizontal_bias="0.1"
                            app:layout_constraintBottom_toBottomOf="@+id/ivRank"
                            app:layout_constraintEnd_toEndOf="parent"
                            app:layout_constraintStart_toEndOf="@+id/ivRank"
                            app:layout_constraintTop_toTopOf="@+id/ivRank" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/tvRank"
                            style="@style/PopinsBold30.DarkBrown"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            app:layout_constraintHorizontal_bias="0.1"
                            android:drawableStart="@drawable/ic_arrow_up_rank"
                            android:gravity="center"
                            android:includeFontPadding="false"
                            android:text="@{viewModel.earnedPoints}"
                            android:textSize="24sp"
                            app:layout_constraintEnd_toEndOf="parent"
                            app:layout_constraintStart_toEndOf="@+id/ivRank"
                            app:layout_constraintTop_toBottomOf="@+id/tvlblTimeBreakdown" />

                    </androidx.constraintlayout.widget.ConstraintLayout>

                </com.google.android.material.card.MaterialCardView>

                <com.google.android.material.card.MaterialCardView
                    android:id="@+id/mcvPoints"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="25dp"
                    app:cardCornerRadius="10dp"
                    app:cardElevation="0dp"
                    android:layout_marginStart="5dp"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/gl3"
                    app:layout_constraintTop_toBottomOf="@+id/lThird">

                    <androidx.constraintlayout.widget.ConstraintLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:background="@color/score_card"
                        android:padding="10dp">

                        <androidx.appcompat.widget.AppCompatImageView
                            android:id="@+id/ivPoints"
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:src="@drawable/gold_star"
                            app:layout_constraintStart_toStartOf="parent"
                            app:layout_constraintTop_toTopOf="parent" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/tvLblPoints"
                            style="@style/TabNunitoSansRegular"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="center"
                            android:includeFontPadding="false"
                            android:text="@string/points_earned"
                            android:textColor="@color/darkBrown"
                            android:textSize="16sp"
                            app:layout_constraintBottom_toBottomOf="@+id/ivPoints"
                            app:layout_constraintEnd_toEndOf="parent"
                            app:layout_constraintHorizontal_bias="0.1"
                            app:layout_constraintStart_toEndOf="@+id/ivPoints"
                            app:layout_constraintTop_toTopOf="@+id/ivPoints" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/tvPoints"
                            style="@style/PopinsBold30.DarkBrown"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="center"
                            android:includeFontPadding="false"
                            android:text="@{`+ ` + viewModel.totalPoints + ` pts`}"
                            android:textSize="24sp"
                            tools:text="+540 pts"
                            app:layout_constraintEnd_toEndOf="parent"
                            app:layout_constraintHorizontal_bias="0.1"
                            app:layout_constraintStart_toEndOf="@+id/ivPoints"
                            app:layout_constraintTop_toBottomOf="@+id/tvLblPoints" />


                    </androidx.constraintlayout.widget.ConstraintLayout>

                </com.google.android.material.card.MaterialCardView>

                <com.google.android.material.card.MaterialCardView
                    android:id="@+id/mcvTimeSection"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    app:cardCornerRadius="10dp"
                    app:cardElevation="0dp"
                    android:layout_marginTop="10dp"
                    app:layout_constraintEnd_toEndOf="@+id/mcvPoints"
                    app:layout_constraintStart_toStartOf="@+id/mcRank"
                    app:layout_constraintTop_toBottomOf="@+id/mcRank">

                    <androidx.constraintlayout.widget.ConstraintLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:background="@color/score_card"
                        android:padding="15dp">

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/tvLblWaitTime"
                            style="@style/TabNunitoSansRegular"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="center"
                            android:includeFontPadding="false"
                            android:text="@string/wait_time"
                            android:textColor="@color/darkBrown"
                            android:textSize="16sp"
                            app:layout_constraintEnd_toEndOf="parent"
                            app:layout_constraintHorizontal_bias="0"
                            app:layout_constraintStart_toStartOf="parent"
                            app:layout_constraintTop_toTopOf="parent" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/tvCompletedTime"
                            style="@style/PopinsBold30.DarkBrown"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="center"
                            android:includeFontPadding="false"
                            android:textSize="30sp"
                            app:layout_constraintHorizontal_bias="0"
                            app:customerWaitTime="@{viewModel.customerArrivalTime}"
                            app:isDugOrder="@{false}"
                            app:layout_constraintEnd_toEndOf="parent"
                            app:layout_constraintStart_toStartOf="@+id/tvLblWaitTime"
                            app:layout_constraintTop_toBottomOf="@+id/tvLblWaitTime"
                            tools:text="2m 3s" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/tvLblAbg"
                            style="@style/TabNunitoSansRegular"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="center"
                            android:includeFontPadding="false"
                            android:text="@string/avg"
                            android:textColor="@color/darkBrown"
                            android:textSize="16sp"
                            app:layout_constraintBottom_toBottomOf="@+id/tvLblWaitTime"
                            app:layout_constraintEnd_toEndOf="parent"
                            app:layout_constraintTop_toTopOf="@+id/tvLblWaitTime" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/tvAvgTime"
                            style="@style/TabNunitoSansRegular"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:drawableStart="@drawable/ic_arrow_up_rank"
                            android:gravity="center"
                            android:includeFontPadding="false"
                            android:text="2m 2s"
                            android:textColor="@color/darkBrown"
                            android:textSize="22sp"
                            app:layout_constraintEnd_toEndOf="parent"

                            app:layout_constraintTop_toBottomOf="@+id/tvLblAbg" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/tvLblBestTime"
                            android:layout_marginTop="2dp"
                            style="@style/TabNunitoSansRegular"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="center"
                            android:includeFontPadding="false"
                            android:text="@string/best"
                            android:textColor="@color/darkBrown"
                            android:textSize="16sp"
                            app:layout_constraintEnd_toEndOf="@+id/tvAvgTime"
                            app:layout_constraintTop_toBottomOf="@+id/tvAvgTime" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/tvBestTime"
                            style="@style/TabNunitoSansRegular"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="center"
                            android:text="2m 2s"
                            android:textColor="@color/darkBrown"
                            android:textSize="22sp"
                            app:layout_constraintEnd_toEndOf="parent"
                            app:layout_constraintTop_toBottomOf="@+id/tvLblBestTime" />




                    </androidx.constraintlayout.widget.ConstraintLayout>

                </com.google.android.material.card.MaterialCardView>

                <androidx.appcompat.widget.AppCompatTextView
                    android:id="@+id/backToHomeButton"
                    style="@style/ButtonPrimary"
                    android:layout_marginTop="20dp"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="48dp"
                    android:layout_marginEnd="48dp"
                    android:enabled="@{viewModel.isBackToHomeButtonEnable}"
                    android:onClick="@{() -> viewModel.navigateToPrescriptionFragmentOrHome()}"
                    android:padding="10dp"
                    android:text="@{isHandOffActionCancel ? @string/rx_dug_code_continue_positive_button : @string/back_to_home}"
                    android:visibility="visible"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/mcvTimeSection" />


                <TextView
                    android:id="@+id/viewOrderSummaryText"
                    style="@style/NunitoSansSemiBold14"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:onClick="@{() -> viewModel.onViewOrderSummaryClicked(viewModel.orderNumber)}"

                    android:text="@{`Order #` + viewModel.orderNumber + ` summary`}"
                    android:textColor="@color/cattBlue"
                    app:layout_constraintEnd_toEndOf="parent"
                    android:layout_marginTop="10dp"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/backToHomeButton"
                    tools:text="@string/view_order_smummary" />
            </androidx.constraintlayout.widget.ConstraintLayout>
        </androidx.core.widget.NestedScrollView>

        <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/handOffLayout"
            visibilityGoneIfFalse="@{viewModel.showCompleteWithException}"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@color/white"
            tools:visibility="visible">

            <ImageView
                android:id="@+id/pharmacyIcon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="24dp"
                android:importantForAccessibility="no"
                android:src="@drawable/pharmacy1"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent" />

            <com.google.android.material.textview.MaterialTextView
                android:id="@+id/statusTitle"
                style="@style/PopinsBold28.DarkBrown"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginHorizontal="24dp"
                android:layout_marginStart="40dp"
                android:layout_marginTop="20dp"
                android:layout_marginEnd="40dp"
                android:gravity="center"
                android:text="@string/pharmacy_grocery_hand_off_complete"
                app:layout_constraintTop_toBottomOf="@id/pharmacyIcon"
                tools:text="@string/pharmacy_grocery_hand_off_complete" />

            <com.google.android.material.textview.MaterialTextView
                android:id="@+id/statusMessage"
                style="@style/NunitoSansSemiBold20.Grey700"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginHorizontal="24dp"
                android:layout_marginTop="24dp"
                android:layout_marginStart="40dp"
                android:layout_marginEnd="40dp"
                android:gravity="center"
                android:text="@string/pharmacy_grocery_hand_off_complete_body"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toBottomOf="@id/statusTitle"
                tools:text="Go to the Pharmacy to return the prescription" />

            <include
                android:id="@+id/waitTime2"
                layout="@layout/hand_off_completed_wait_time"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                app:visibilityGoneIfTrue="@{isHandOffActionCancel}"
                app:orderNumber="@{viewModel.orderNumber}"
                app:customerWaitTime="@{viewModel.customerArrivalTime}"
                app:otpCaptureOrBypassTime="@{viewModel.otpCapturedOrByPassTime}"
                app:viewModel="@{viewModel}"
                android:layout_marginTop="32dp"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toBottomOf="@+id/statusMessage"
                tools:visibility="visible" />

            <com.google.android.material.textview.MaterialTextView
                android:id="@+id/troubleMessage"
                style="@style/NunitoSansSemiBoldItalic20"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="20dp"
                android:layout_marginHorizontal="24dp"
                android:layout_marginBottom="20dp"
                android:gravity="center"
                android:text="@string/interstitial_reconnect_wifi"
                app:layout_constraintBottom_toTopOf="@id/backToHomeButton2"
                app:visibilityGoneIfFalse="@{viewModel.isShowingTroubleMessage}"
                tools:text="Reconnecting to Wifi..."
                tools:visibility="visible" />

            <androidx.appcompat.widget.AppCompatTextView
                android:id="@+id/backToHomeButton2"
                style="@style/ButtonPrimary"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginStart="48dp"
                android:layout_marginEnd="48dp"
                android:layout_marginBottom="10dp"
                android:enabled="@{viewModel.isBackToHomeButtonEnable}"
                android:onClick="@{() -> viewModel.navigateToPrescriptionFragmentOrHome()}"
                android:padding="10dp"
                android:text="@string/rx_dug_prescription_return_to_pharmacy"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent" />

        </androidx.constraintlayout.widget.ConstraintLayout>
    </androidx.constraintlayout.widget.ConstraintLayout>
</layout>